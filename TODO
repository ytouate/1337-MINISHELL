herdoc
include the herdoc inside the pipe
handle signals
handle the exit status
the second problem is when there are multiple chained commands before the heredoc they output the result before the heredoc finishes its excution